# Contributing to phUML

## Code of Conduct

This project is released with a [Contributor Code of Conduct][conduct].
By participating in this project you agree to abide by its terms.

## Workflow

* Fork the project.
* Make your bug fix or feature addition.
* Add tests for it. This is important so we don't break it in a future version unintentionally.
* Send a pull request. Bonus points for topic branches.

Pull requests for bug fixes must be based on the current stable branch whereas pull requests for new features must be based on the `master` branch.

## Coding Guidelines

This project follows the coding standards proposed in [PSR-2][psr2]

You can use [PHP CS fixer][cs-fixer] to (re)format your sourcecode for compliance with this project's coding guidelines:

Run the following command to install the fixer.

```bash
$ composer global require friendsofphp/php-cs-fixer
```

Run the following command if you modified either production or tests.

```bash
$ make fix
```

[Make][make] will run the fixer in both folders `src` and `tests`.

## Using phUML from a Git checkout

The following commands can be used to perform the initial checkout of phUML:

```bash
$ git clone git://github.com/MontealegreLuis/phuml.git

$ cd phuml
```

Retrieve phUML's dependencies using [Composer][composer]:

```bash
$ composer install
```

## Running phUML's test suite

There's a group of tests that verify that the generated class diagrams did not change.
Since there's a slight difference in the output between operating systems.
It is recommended to run the whole test suite using the provided [Docker][docker] container.
In order to run the container you'll also need to have [Docker Compose][docker-compose] installed.
The container mimics the environment in [Travis][travis].
Please make sure the tests pass in the container so you can be sure they will pass in Travis too.

You can run the tests as follows:

```
$ make test
```

`make` will run PHPUnit with the same options it runs in Travis inside the Docker container.

You can alternatively run the test suite without this group of tests in your local environment.

```
$ vendor/bin/phpunit --coverage-text --coverage-clover=coverage.clover --exclude-group=snapshot
```

You will need [XDebug][xdebug] installed to be able to generate the code coverage report.

## Contributing to the documentation

The documentation of this package is generated by [Couscous][couscous].
You can install Couscous globally with the following commands.

```
$ curl -OS http://couscous.io/couscous.phar
$ chmod +x couscous.phar
$ sudo mv couscous.phar /usr/local/bin/couscous
```

Run the following command to preview your changes:

```
$ couscous preview
```

## Reporting issues

Before opening a new ticket, please search through the [existing issues][issues].

[psr2]: http://www.php-fig.org/psr/psr-2/
[cs-fixer]: https://github.com/FriendsOfPHP/PHP-CS-Fixer
[issues]: https://github.com/MontealegreLuis/phuml/issues
[docker]: https://www.docker.com/
[travis]: https://travis-ci.org/
[make]: https://en.wikipedia.org/wiki/Make_(software)
[xdebug]: https://xdebug.org/
[docker-compose]: https://docs.docker.com/compose/overview/
[couscous]: http://couscous.io/
[conduct]: https://github.com/MontealegreLuis/phuml/blob/master/CODE-OF-CONDUCT.md
[composer]: https://getcomposer.org/
